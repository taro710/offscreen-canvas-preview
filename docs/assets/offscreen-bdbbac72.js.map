{"version":3,"file":"offscreen-bdbbac72.js","sources":["../../three/src/offscreen/offscreen.ts"],"sourcesContent":["import { GUI } from 'lil-gui';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\n\n/**\n * Base\n */\nconst canvas = (document.querySelector('canvas.webgl') || undefined) as HTMLCanvasElement | undefined;\n\nconst offscreenCanvas = canvas.transferControlToOffscreen();\n\nconst sizes = {\n  width: window.innerWidth,\n  height: window.innerHeight,\n};\n\nconst params = {\n  boxCount: Number(localStorage.getItem('boxCount')) || 1000,\n};\n\n// Workerを作成し、OffscreenCanvasを渡す\nconst worker = new Worker(new URL('./worker.ts', import.meta.url));\nworker.postMessage({ canvas: offscreenCanvas, sizes, params: { boxCount: params.boxCount } }, [offscreenCanvas]);\n\nconst btn = document.getElementById('btn');\nlet clicked = false;\nif (!btn) throw new Error('Button not found');\n\nbtn.addEventListener('click', () => {\n  if (clicked) {\n    btn.classList.remove('clicked');\n  } else {\n    btn.classList.add('clicked');\n  }\n  clicked = !clicked;\n});\n\nconst gui = new GUI();\ngui\n  .add(params, 'boxCount')\n  .min(0)\n  .max(10000)\n  .step(10)\n  .onFinishChange((value: number) => {\n    worker.postMessage({ type: 'update', params: { boxCount: value } });\n    localStorage.setItem('boxCount', value.toString());\n  });\n\nconst stats = new Stats();\nstats.showPanel(0);\ndocument.body.appendChild(stats.dom);\n\n/**\n * AnimationFrame\n */\nconst tick = () => {\n  stats.update();\n  window.requestAnimationFrame(tick);\n};\n\ntick();\n"],"names":["canvas","offscreenCanvas","sizes","params","worker","btn","clicked","gui","GUI","value","stats","Stats","tick"],"mappings":"sDAMA,MAAMA,EAAU,SAAS,cAAc,cAAc,GAAK,OAEpDC,EAAkBD,EAAO,6BAEzBE,EAAQ,CACZ,MAAO,OAAO,WACd,OAAQ,OAAO,WACjB,EAEMC,EAAS,CACb,SAAU,OAAO,aAAa,QAAQ,UAAU,CAAC,GAAK,GACxD,EAGMC,EAAS,IAAI,OAAO,IAAuC,IAAA,sDAAA,KAAA,QAAA,CAAA,EACjEA,EAAO,YAAY,CAAE,OAAQH,EAAiB,MAAAC,EAAO,OAAQ,CAAE,SAAUC,EAAO,QAAS,CAAK,EAAA,CAACF,CAAe,CAAC,EAE/G,MAAMI,EAAM,SAAS,eAAe,KAAK,EACzC,IAAIC,EAAU,GACd,GAAI,CAACD,EAAW,MAAA,IAAI,MAAM,kBAAkB,EAE5CA,EAAI,iBAAiB,QAAS,IAAM,CAC9BC,EACED,EAAA,UAAU,OAAO,SAAS,EAE1BA,EAAA,UAAU,IAAI,SAAS,EAE7BC,EAAU,CAACA,CACb,CAAC,EAED,MAAMC,EAAM,IAAIC,EAChBD,EACG,IAAIJ,EAAQ,UAAU,EACtB,IAAI,CAAC,EACL,IAAI,GAAK,EACT,KAAK,EAAE,EACP,eAAgBM,GAAkB,CAC1BL,EAAA,YAAY,CAAE,KAAM,SAAU,OAAQ,CAAE,SAAUK,CAAM,CAAA,CAAG,EAClE,aAAa,QAAQ,WAAYA,EAAM,SAAU,CAAA,CACnD,CAAC,EAEH,MAAMC,EAAQ,IAAIC,EAClBD,EAAM,UAAU,CAAC,EACjB,SAAS,KAAK,YAAYA,EAAM,GAAG,EAKnC,MAAME,EAAO,IAAM,CACjBF,EAAM,OAAO,EACb,OAAO,sBAAsBE,CAAI,CACnC,EAEAA,EAAK"}